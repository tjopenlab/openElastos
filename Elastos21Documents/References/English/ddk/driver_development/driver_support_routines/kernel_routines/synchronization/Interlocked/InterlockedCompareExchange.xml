<!--==========================================================================-->
<!-- Copyright (c) 2000-2004,  Elastos, Inc.  All Rights Reserved.-->
<!--==========================================================================-->

    <?xml version = "1.0" encoding="GB2312" ?>
    <?xml:stylesheet type="text/xsl" href="/xsl/xsl_e/methodmanual.xsl"?><manpage>
<volume>Synchronization</volume>
<method> InterlockedCompareExchange </method>
    <description>
        <para>
            The <b>InterlockedCompareExchange</b> function performs an atomic comparison of the specified values
            and exchanges the values, based on the outcome of the comparison. The function prevents more than
            one thread from using the same variable simultaneously.
        </para>
    </description>
    <syntax>
        <return_val>LONG</return_val>
        <parameters>
            <api_param>
                <param_type> PLONG </param_type>
                <param_name> Destination </param_name>
                <param_note>
                    <para>
                        Specifies the address of the <i>Destination</i> value.
                    </para>
                </param_note>
            </api_param>
        </parameters>

        <parameters>
            <api_param>
                <param_type> LONG </param_type>
                <param_name> Exchange </param_name>
                <param_note>
                    <para>
                        Specifies the exchange value.
                    </para>
                </param_note>
            </api_param>
        </parameters>

        <parameters>
            <api_param>
                <param_type> LONG </param_type>
                <param_name> Comperand </param_name>
                <param_note>
                    <para>
                        Specifies the value to compare with <i>Destination</i>.
                    </para>
                </param_note>
            </api_param>
        </parameters>
    </syntax>

	<return>
	    <para>Initial value of the <i>Destination</i>.</para>
	</return>

	<remarks>
		<para>
		    The Interlocked functions provide a simple mechanism to synchronize the accesses
		    to a shared varibale by several threads. If the variable is in the shared memory, distinct threads can
		    use this mechanism.
        </para>
        <para>
            The <b>InterlockedCompareExchange</b> function performs an atomic comparison of the <i>Destination</i> 
            value with the <i>Comperand</i> value. If the <i>Destination</i> value is equal to the <i>Comperand</i> 
            value, the <i>Exchange</i> value is stored in the address specified by <i>Destination</i>. Otherwise, 
            no operation is performed.
        </para>
        <para>
            The variables for <b>InterlockedCompareExchange</b> must be aligned on a 32-bit boundary, or the 
            function may fail in multiprocessor x86 systems and any non-x86 systems.
        </para>
        <para>
            If you are exchanging pointer values, this function has been superseded by the <link
            url="InterlockedCompareExchangePointer.htm">InterlockedCompareExchangePointer</link> function.
        </para>

	</remarks>

    <requirements>
        <system>
            <system_name>
				Elastos 2.0 or later.
			</system_name>
        </system>
        <headerfile>
            <file_name> ddk.h </file_name>
        </headerfile>
    </requirements>
</manpage>