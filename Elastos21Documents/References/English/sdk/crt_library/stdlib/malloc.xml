<!--==========================================================================-->
<!-- Copyright (c) 2000-2004,  Elastos, Inc.  All Rights Reserved.-->
<!--==========================================================================-->

<?xml version="1.0" encoding="GB2312"?>
<?xml:stylesheet type="text/xsl" href="/xsl/xsl_e/manual.xsl"?>

<manpage>
    <sample url="sdk\operating_system\crt\libc\stdlib\malloc">malloc</sample>
    <title> malloc</title>
    <volume>C Run-Time Library</volume>
    <routine_idx> slib_idx.htm </routine_idx>

    <description>
        <para>Allocates memory blocks.</para>
    </description>

    <syntax>
        <return_val>void *</return_val>
        <func_name>malloc</func_name>
        <parameters>
            <func_param>
                <param_type>size_t</param_type>
                <param_name>size</param_name>
                <param_note>
                    <para>Bytes to allocate.</para>
                </param_note>
            </func_param>
        </parameters>
    </syntax>

    <return>
        <para>malloc function returns a void pointer to the allocated space, or NULL if there is insufficient memory available. To return a pointer to a type other than void, use a type cast on the return value. The storage space pointed to by the return value is guaranteed to be suitably aligned for storage of any type of object. If size is 0, malloc allocates a zero-length item in the heap and returns a valid pointer to that item. Always check the return from malloc, even if the amount of memory requested is small.</para>
    </return>

    <remarks>
        <para>The malloc function allocates a memory block of at least size bytes. The block may be larger than size bytes because of space required for alignment and maintenance information.</para>
    </remarks>

    <requirements>
        <routine>
            <routine_name>malloc</routine_name>
            <headerfile>stdlib.h</headerfile>
            <compatibility>ANSI, Windows 2000, Elastos 2.0</compatibility>
        </routine>
    </requirements>

    <example>
<pre>
//==========================================================================
// Copyright (c) 2000-2004,  Elastos, Inc.  All Rights Reserved.
//==========================================================================

/* malloc.cpp:This program allocates memory with
 * malloc, then frees the memory with free.
 */

#include &lt;stdlib.h&gt;            /* For _MAX_PATH definition */
#include &lt;stdio.h&gt;
#include &lt;malloc.h&gt;

int main()
{
    char *string;

    /* Allocate space for a path name */
    string = (char *)malloc(_MAX_PATH);
    if (string == NULL)
        printf(&quot;Insufficient memory available\n&quot;);
    else {
        printf(&quot;Memory space allocated for path name\n&quot;);
        free(string);
        printf(&quot;Memory freed\n&quot;);
    }

    return 0;
}
</pre>
    </example>
<result>
Memory space allocated for path name
Memory freed
</result>



    <references>
        <reference>
            <ref_name>_alloca </ref_name>
            <ref_url>../malloc/_alloca</ref_url>
        </reference>
        <reference>
            <ref_name>free</ref_name>
            <ref_url>free</ref_url>
        </reference>
        <reference>
            <ref_name>realloc</ref_name>
            <ref_url>realloc</ref_url>
        </reference>
    </references>

</manpage>