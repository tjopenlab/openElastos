<!--==========================================================================-->
<!-- Copyright (c) 2000-2006,  Elastos, Inc.  All Rights Reserved.-->
<!--==========================================================================-->

<html>
<head>
<title>嵌入式操作系统的航向</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<script src="/xsl/docstyles.js"></script>
</head>

<body>
     
    <h1><center>嵌入式操作系统的航向</center></h1>
    <p><center>刘艺平</center></p>
    <p><b>凡接触过电脑的绝大多数人比较熟悉从DOS到Windows XP的Microsoft桌面操作系统系列，专业用户也非常了解Windows NT、Unix和Linux等服务器操作系统，而嵌入式操作系统似乎在人们的言谈之间被冷淡了许多。实际上，人们身边无处不在的、分布更加广泛的嵌入式系统也越来越需要操作系统的驻足，而且随着这些嵌入式系统的发展，对其操作系统也提出了新的要求。</b></p>
    
    <p>在桌面操作系统领域几乎一统天下的Microsoft公司，也不会眼睁睁看着在服务器和嵌入式系统领域的操作系统市场被他人所分食--尽管在向这些领域扩张的过程中遇到的竞争对手多如牛毛。截止本文发稿时，Microsoft公司即将于2002年1月22日在深圳举行的嵌入式系统开发者大会上，准备向世人展示其最新的嵌入式操作系统Windows XP Embedded。这无疑给国产嵌入式操作系统带来了一定的压力。本文力图理出嵌入式操作系统的发展脉路，以在国产嵌入式操作系统开发者中起到抛砖引玉的作用。</p>
                 
    <h3>1.嵌入式设备需要操作系统</h3>
        <p>多年以来，嵌入式系统一直被广泛应用于各种设备当中，大到车、船和卫星，小到家用电器。大部分的嵌入式系统并不需要操作系统。首先是因为没有必要。例如洗衣机和微波炉等等，它们的功能有限。这样的系统只需要一道控制程序管好几个按键、指示灯和数码管就可以了。其次是因为条件不允许。它们采用4位或8位的微处理器，有的内存少得不到1KB，根本没有操作系统生存的空间。即使要完成一些比较复杂的任务，也只能依靠程序员的技巧去精雕细琢，以弥补硬件条件的不足。</p> 
        <p>随着硬件的发展，嵌入式系统的应用领域日益扩大，提供的应用功能也越来越复杂，当初的控制程序被随之逐步加入了许多功能，而这些功能有很多是可以由操作系统来提供的。这很自然地会让人联想到应该为嵌入式系统做一个嵌入式操作系统。由此可见，嵌入式操作系统是由于工程实践的需要而诞生的。而嵌入式操作系统所使用的技术，基本上是从台式计算机操作系统下推而来的。由于应用的需要和硬件条件的限制，嵌入式操作系统一般都注重占用空间小和效率高等特点。</p>
      
    <h3>2. 控制程序与操作系统</h3>
        <p>尽管嵌入式操作系统有功能丰富和稳定性好等优点，但大部分的嵌入式系统仍然继续采用控制程序而没有采用操作系统。之所以产生这种现象，除了功能需求和硬件方面的限制因素以外，还主要有如下两条原因。</p> 
        <p>首先，有不少嵌入式系统的控制程序是逐步发展起来的，每一步改动都比较小。这种在原有系统上打补丁的代价，要小于改用操作系统所需付出的代价，从而使工程人员很难下决心换用嵌入式操作系统。另外，即使是一个从头开始的项目，也会由于用户已经熟悉了老的手段和工具，再加上经常还受到时间和经费的限制等原因，要换一个全新的嵌入式操作系统确实是一件需要慎重考虑的事情。</p> 
        <p>其次，虽然控制程序在开发成本和可靠性等方面都有缺点，但它最大的好处之一就是没有那些商业化嵌入式操作系统中许多用不着的功能。虽然到目前为止，几乎每一个嵌入式操作系统都号称可以根据应用的需要进行剪裁，可是大多都是静态剪裁，也就是用不同的模块编译链接成不同的系统。这种剪裁使嵌入式操作系统的稳定性大打折扣，因为每一种裁剪的结果都可以看成是一个全新的系统，它的可靠性还需要实践的检验。</p> 
        <p>虽然上述的因素导致许多嵌入式系统仍然沿用控制程序，但控制程序近来在有些应用领域越来越力不从心了，需要嵌入式操作系统的取代。例如，高性能的手持设备、移动设备和复杂的工业控制装置（例如数控机床和机器人等）如果继续采用自己的控制程序，就意味着需要用户自己来做一个专用操作系统，因为设备管理、内存管理和进程管理等都是必不可少的。而精通控制程序的人很难同时又是一个操作系统的专家。</p>

    <h3>3. 商业化产品的发展思路</h3>
        <p>到目前为止，商业化嵌入式操作系统的发展主要受到用户嵌入式系统的功能需求、硬件资源以及嵌入式操作系统自身灵活性的制约。而随着嵌入式系统的功能越来越复杂，硬件所提供的条件越来越好，选择嵌入式操作系统也就越来越有必要了。到了高端产品的阶段，可以说采用商业化嵌入式操作系统是最经济可行的方案，而这个阶段的应用也为嵌入式操作系统的发展指出了方向。</p> 
        <p><b>呼唤32位系统</b></p> 
        <p>目前用得最多的还是16位寻址空间的嵌入式操作系统，但是它们的局限性已经日趋明显。这首先是因为很多嵌入式系统所具有的功能已经相当复杂（例如当前炒得很热的3G手机就包括了无线通信、访问互联网和处理多媒体等等功能；而许多控制设备也正在走向多机协调、连网和遥控等），需要具备支持32位地址空间、虚拟存储管理和多进程等特点（以前只见于大型操作系统）的嵌入式操作系统。另外，现在的嵌入式设备需要比以往更丰富的图形界面来操控它们的强大功能，而昔日的主流产品psos和vxWorks等在这方面正越来越面临压力。</p> 
        <p><b>采用组件技术</b></p>
        <p>为了解决可裁剪这一灵活性问题，最新的组件技术也正在被下推到嵌入式操作系统环境之中。组件技术还可以解决网络环境下对于程序动态下载运行模式的新要求。新一代的移动设备不可能在出厂时预先安装和存储所有可能会用到的程序，因此必须能够动态寻找和加载程序。而这种寻找和加载对用户应该是透明的，因为不可能要求用户知道程序在哪儿以及如何加载运行等。这些加载的程序不仅仅是一般的应用程序，还经常会是设备驱动程序。假如某个移动设备进入某个办公环境后要使用某个打印机，这时不可能要求这个移动设备正好安装有这种打印机的驱动程序。而一种理想的解决方案是：通过访问打印机的标准接口，查询它需要何种驱动程序; 然后移动设备自动通过无线方式从网上下载该驱动程序，动态链接驱动模块; 最后通过标准接口使用打印机--这一切都是不需要用户直接参与的。</p> 
        <p>与大多数技术是由大型操作系统的技术下推而来不同的是，在新型的设备驱动模式这一点上嵌入式操作系统没有现成的经验可以借鉴，因此嵌入式系统的发展现状迫切需要一种创新的嵌入式操作系统。</p> 
        <p><b>提供良好的开发环境</b></p>
        <p>嵌入式操作系统成功与否的另一个重要条件就是它所提供的开发环境和开发工具。如果在一个嵌入式操作系统上不能方便有效地开发出应用程序，它的价值就会大打折扣。完善的开发环境、调试工具和支持多种检索的文档都是一个高档嵌入式操作系统所必须具备的。</p> 
        <p><b>提供咨询和个性化定制</b></p>
        <p>将一句流行口号--"软件就是服务"，用于指导嵌入式操作系统的发展方向是十分贴切的。首先，应用开发者的精力通常都集中在自己的应用领域，而没有时间和精力去全面掌握操作系统，所以需要嵌入式操作系统供应商提供咨询服务。其次，嵌入式系统的最大特点就是个性突出，每个具体的嵌入式系统都会有自己独特的地方，当其有某种特殊需要时如果操作系统能给予支持，则往往会有事半功倍之效。因此一个商业化嵌入式操作系统能否在模块化的基础上提供定制模块，可能会成为用户能否选择它的关键。当然，要做到这一点，需要一支掌握核心技术同时又立足于中国本土的开发队伍。而建立这样一支队伍的最好方法就是早日在中国进行这种商业化嵌入式操作系统的开发。</p>

    <h3>4. 国内外产品举例</h3>
        <p>北京科泰世纪公司正在研发的Zyco是目前国内为数不多的采用组件技术的32位嵌入式操作系统，目前已经进入产品的试验应用阶段。而Micosoft公司已在2001年年底发布了其最新的嵌入式操作系统Windows XP Embedded（见附图）。它们都是定位于高档商业化产品的嵌入式操作系统，支持32位地址空间、虚拟存储管理、多进程以及嵌入式操作系统中不多见的动态库（DLL）加载。 </p>

        <p>Zyco还具备的其他特点包括全面采用以ezCOM为核心的组件化编程模型，包括Zyco本身的许多模块都采用组件的形态，这样能实现可执行代码的可裁剪并且支持动态的设备驱动模式。ezCOM技术和Windows XP Embedded所采用的COM技术兼容。</p> 

        <p>Windows XP Embedded最大的特点是可以被高度灵活配置，根据各类用户不同的需求被定制成不同的嵌入式操作系统（包括4.8MB 的超小型基本系统、14MB的基本Win32系统，以及包括图形用户界面和IE 6.0等最新软件的70MB的全功能嵌入式系统），因为它提供了数量多达1万个的组件供开发人员自由组合，具备高度的可裁剪性。</p>
        <center><img src="images/osd_fig.bmp"></center>
 
<script>footer("chinese")</script>
</body>
</html>