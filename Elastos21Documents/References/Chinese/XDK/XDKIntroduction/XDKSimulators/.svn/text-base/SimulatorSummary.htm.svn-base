<!--==========================================================================-->
<!-- Copyright (c) 2000-2008,  Elastos, Inc.  All Rights Reserved.-->
<!--==========================================================================-->
<html>
<head>
<title>XDK中的模拟器</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<script src="/xsl/docstyles.js"></script>
</head>

<body>

<h2>模拟器概述</h2>
    <p>在XDK中，模拟器使得原本在目标机上运行的应用程序能够在windows上运行，方便的运行调试环境提高了开发的效率，缩短了开发的周期。模拟器提供了XDK开发所需要的系统调用接口，使得模拟器开发出来的程序不需要进行任何的代码修改便可以在手机开发环境上通过编译和链接，把生成的基于ARM指令集的目标代码烧到真实手机上运行。并且，模拟器还提供了大部分的硬件驱动（如声卡，显卡，摄像头）仿真，便于上层相关的应用开发。<p>
    <h3>模拟器工作原理</h3>
       <p>模拟器开发环境使用MSVC编译工具集（MSVC8.0）将编译好的目标代码运行在PC主机上，宿主操作系统是WINDOWS系列操作系统（兼容WINDOWS 2000及其以后的版本）。它仅仅进行API级的模拟，主要用于代码逻辑的开发和调试。方便了用户在没有真实手机的开发情况下，用PC进行程序开发。模拟器工作模型及原理见图2-11：</p>
       <center><img src="images/simulatormodel.jpg"></center>
       <center>图2-11</center>
       <p>模拟器通过配置文件读取具体参数，可以根据某一产品更换模拟器，相关的配置文件在XDK\DevKit\simulators目录下的产品子目录下。</p>
       <p><b>说明：</b>模拟器使用MSVC内置的调试器进行调试。因为模拟器开发环境使用MSVC8.0作为编译工具集，所以需要使用VC8.0的调试工具才能正常进行调试，避免无法正常识别调试符号的问题。</p>
    <h3>XDK支持的模拟器</h3>
        <p>现阶段只有手机的模拟器，运行于windows平台上。有GNU和MSVC两个版本，这两个版本对于上层应用几乎没有区别，不同的是调试时GNU版本使用GDB调试器，MSVC版本使用微软的Visual studio进行调试。</p>

    <h3>模拟器的功能 </h3>
        <p>模拟器向开发人员提供了两个基本的功能，即： </p>
        <ul>
           <li>在PC机上直接运行应用程序：模拟过程中，模拟器在PC机上直接运行应用程序，且可以对程序提供输入、输出功能。
           <li>调用VC调试器对应用程序进行调试：程序运行出错时，自动调用VC调试器对程序进行调试；或是在程序中添加断点，程序运行至断点时调用VC调试器对程序进行调试。
        </ul>
    
    <h3>模拟器的使用 </h3>
        <ul>
           <li>启动模拟器：在命令行执行elaura.exe程序。
           <li>运行应用程序。通过模拟器使用户可以直接在模拟器上运行在XDK环境下开发的应用程序。对于图形程序，在模拟过程中模拟器将启动一个专门的窗口，用来模拟手机的LCD显示屏，同时可以通过键盘、触摸笔等方式接收用户输入。如果程序存在错误，可以调用系统指定的调试器进行调试。模拟器还提供了对这些应用程序中的内存泄露和内存越界情况进行监测的功能。
           <li>对于与网络有关的程序模块，Elaura模拟器提供了两条物理链路连接访问网络，分别为通讯模块与pc机上的物理网卡。
           <ul>
              <li>当存在通讯模块时，模拟器将通过通讯模块拨号访问网络。通讯模块的使用方法请参见此处<a class="style1" href="telecom-module.htm">请参见此处</a>。
              <li>当不存在通讯模块时，模拟器可以通过pc机的物理网卡访问网络，此时需要将所使用网卡的网络参数对应填入win32模拟器的网络环境配置选项，具体方法<a class="style1" href="Environment-Configure.htm#tcpip">请参见此处</a>。
           </ul>
        </ul>
<script>footer("chinese")</script>
</body>
</html>